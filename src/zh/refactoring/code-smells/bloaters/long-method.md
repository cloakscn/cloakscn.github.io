---
title: 长方法名
date: 2023-02-18
order: 1
category:
  - 重构
---
<!-- more -->

## 特征

一个方法包含了太多的代码。通常来讲，所有方法行数太多你都应该问自己问题了。

## 问题的原因

像宾馆一样，有些东西总是添加，但是从来不删除。由于写代码要比读代码更容易，直到方法到了不能维护的地步问题才会暴露。

在精神上，创建一个新方法通常比添加现有方法更难：“但它只是两行，仅仅为此创建整个方法没有用......” 这意味着又添加了一行，然后又添加了一行，从而产生了一堆代码。

## 应对方案

根据经验，如果您觉得需要对方法内的某些内容进行评论，你应该将该代码放入一个新方法中。如果需要解释的话，即使是一行也可以而且应该被分成一个单独的方法。如果**该方法有一个描述性名称**，那么没有人需要查看代码来了解它的作用。

- 使用 [提取方法](../../techniques/composing-methods/extract-method.md) 减少方法体的长度；
- 如果局部变量和参数干扰提取方法，使用 [用查询替换临时变量](../../techniques/composing-methods/replace-temp-with-query.md), [引入参数对象](../../techniques/simplifying-method-calls/introduce-parameter-object.md) or **Preserve Whole Object**；
- 如果前面的方法没有帮助，尝试通过 **Replace Method with Method Object** 将整个方法移至单独的对象。
- 条件运算符和循环是一个很好的线索，可以将代码移动到单独的方法中。对于条件，请使用 **Decompose Conditional**。如果存在循环问题，请尝试 [提取方法](../../techniques/composing-methods/extract-method.md)。

## 回报

- 在所有类型的面向对象代码中，具有短方法的类寿命最长。更庞大的方法意味着更加的不易读和不易管理。
- 此外，长方法为不需要的重复代码提供了完美的隐藏位置。

## 性能

正如许多人声称的那样，方法数量的增加是否会损害性能？在几乎所有情况下，影响都可以忽略不计（微不足道），甚至不值得担心。

另外，现在您已经有了清晰易懂的代码，您更有可能找到真正有效的方法来重组代码并在需要时获得真正的性能提升。